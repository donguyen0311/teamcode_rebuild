"use strict";!function(){function e(e,t,o,r){function n(e,t,o){e.isAuthenticate()&&o(function(){t.go("structure.home")})}function l(e,t,o){e.authentication().then(function(e){e.success||o(function(){t.go("blank.login")})},function(e){o(function(){t.go("blank.login")})})}n.$inject=["userService","$state","$timeout"],l.$inject=["userService","$state","$timeout"],r.interceptors.push("authInterceptor"),e.state("blank",{abstract:!0,views:{root:{templateUrl:"app/templates/blank.html"}},resolve:{isAuthenticated:n}}).state("structure",{abstract:!0,views:{root:{templateUrl:"app/templates/structure.html"}}}).state("structure.home",{url:"/",views:{header:{templateUrl:"app/templates/header.html",controller:"headerController",controllerAs:"vm"},content:{templateUrl:"app/templates/home.html",controller:"mainController",controllerAs:"vm"}}}).state("blank.login",{url:"/login",views:{"":{templateUrl:"app/templates/login.html",controller:"loginController",controllerAs:"vm"}}}).state("blank.register",{url:"/register",views:{"":{templateUrl:"app/templates/register.html",controller:"registerController",controllerAs:"vm"}}}).state("structure.profile",{url:"/profile",views:{header:{templateUrl:"app/templates/header.html",controller:"headerController",controllerAs:"vm"},sidebar:{templateUrl:"app/templates/sidebar.html",controller:"sidebarController",controllerAs:"vm"},content:{templateUrl:"app/templates/profile.html",controller:"profileController",controllerAs:"vm"}},resolve:{redirectIfNotAuthenticated:l}}).state("structure.dashboard",{url:"/dashboard",views:{header:{templateUrl:"app/templates/header.html",controller:"headerController",controllerAs:"vm"},sidebar:{templateUrl:"app/templates/sidebar.html",controller:"sidebarController",controllerAs:"vm"},content:{templateUrl:"app/templates/dashboard.html",controller:"dashboardController",controllerAs:"vm"}},resolve:{redirectIfNotAuthenticated:l}}).state("structure.editor",{url:"/editor",views:{header:{templateUrl:"app/templates/header.html",controller:"headerController",controllerAs:"vm"},content:{templateUrl:"app/templates/editor.html",controller:"editorController",controllerAs:"vm"}}}),o.otherwise("/")}e.$inject=["$stateProvider","$locationProvider","$urlRouterProvider","$httpProvider"],angular.module("myApp",["ngAnimate","ngSanitize","ngCookies","dndLists","ngAria","ngMaterial","ngMessages","ui.router","app.controllers","app.directives","app.services"]).config(e).run(["$rootScope","$state","$stateParams",function(e,t,o){e.$state=t,e.$stateParams=o}])}(),angular.module("app.controllers",["app.controllers.maincontroller","app.controllers.headercontroller","app.controllers.sidebarcontroller","app.controllers.logincontroller","app.controllers.registercontroller","app.controllers.profilecontroller","app.controllers.dashboardcontroller","app.controllers.editorcontroller"]),function(){function e(e,t){e.models={selected:null,lists:{A:[],B:[],C:[],D:[]}};for(var o=1;o<=3;++o)e.models.lists.A.push({label:"Item A"+o,name:"Name A"+o}),e.models.lists.B.push({label:"Item B"+o,name:"Name B"+o}),e.models.lists.C.push({label:"Item C"+o,name:"Name C"+o}),e.models.lists.D.push({label:"Item D"+o,name:"Name D"+o});t(function(){e.models.lists.A.push({label:"Item A10",name:"Name A10"})},2e3),e.insertedEvent=function(e,t,o,r){console.log(e,t,o,r)},e.$watch("models",function(t){e.modelAsJson=angular.toJson(t,!0),console.log(t)},!0)}e.$inject=["$scope","$timeout"],angular.module("app.controllers.dashboardcontroller",[]).controller("dashboardController",e)}(),function(){function e(e){}e.$inject=["$scope"],angular.module("app.controllers.editorcontroller",[]).controller("editorController",e)}(),function(){function e(e,t){}e.$inject=["$scope","$cookies"],angular.module("app.controllers.estimatecontroller",[]).controller("estimateController",e)}(),function(){function e(e,t,o,r,n,l,s){function a(e){return function(){l(e).toggle()}}var i=this;i.toggleLeft=a("left"),i.toggleRight=a("right"),i.isNavCollapsed=!0,i.isAuthenticate=t.isAuthenticate,i.email=o.sessionStorage.email,i.logout=function(){t.logout().then(function(e){e.success&&r.go("blank.login")})},i.openMenu=function(e,t){e.open(t)}}e.$inject=["$scope","userService","$window","$state","$timeout","$mdSidenav","$mdDialog"],angular.module("app.controllers.headercontroller",[]).controller("headerController",e)}(),function(){function e(e,t,o,r,n){function l(){t.login(s.user).then(function(e){e.success?(n.showToast(e.message,"top right",2e3),r(function(){o.go("structure.profile")},2e3)):n.showToast(e.message,"top right",5e3)},function(e){e&&o.go("blank.login")})}var s=this;s.alerts=[],s.login=l}e.$inject=["$scope","userService","$state","$timeout","toastService"],angular.module("app.controllers.logincontroller",[]).controller("loginController",e)}(),function(){function e(e,t){$("#particles").particleground({dotColor:"#a5a5a5",lineColor:"#a5a5a5"}),$("#intro").css({"margin-top":-$("#intro").height()/2})}e.$inject=["$scope","$cookies"],angular.module("app.controllers.maincontroller",[]).controller("mainController",e)}(),function(){function e(e,t,o,r){function n(){var e=document.createElement("input");return e.style.display="none",e.type="file",e.name="file",e.accept="image/*",e.onchange=function(o){console.log(e.files,o);var r=e.files[0],n=new FormData;n.append("file",r),t.uploadImage(n).then(function(e){console.log(e)},function(e){console.log(e)})},e}var l=this;l.countContribute=0,l.countProject=0,t.getUserInfo(o.sessionStorage.email).then(function(e){l.user=e.user},function(e){console.log(e)}),l.changeImage=function(){console.log("click"),n().click()}}e.$inject=["$scope","userService","$window","$timeout"],angular.module("app.controllers.profilecontroller",[]).controller("profileController",e)}(),function(){function e(e,t,o,r,n){function l(){r.register(s.user).then(function(e){e.success?(n.showToast(e.message,"top right",2e3),o(function(){t.go("blank.login")},2e3)):n.showToast(e.message,"top right",5e3)},function(e){e&&t.go("blank.register")})}var s=this;s.alerts=[],s.register=l}e.$inject=["$scope","$state","$timeout","userService","toastService"],angular.module("app.controllers.registercontroller",[]).controller("registerController",e)}(),function(){function e(e,t,o){this.logout=function(){t.logout().then(function(e){e.success&&o.go("blank.login")})}}e.$inject=["$scope","userService","$state"],angular.module("app.controllers.sidebarcontroller",[]).controller("sidebarController",e)}(),angular.module("app.directives",[]),function(){function e(e,t,o,r){return{request:function(e){return e.headers=e.headers||{},t.sessionStorage.token&&(e.headers["x-access-token"]=t.sessionStorage.token),e},response:function(e){return e},responseError:function(e){return 403===e.status&&o.go("blank.login"),e}}}e.$inject=["$q","$window","$state","$location"],angular.module("app.services.autheninterceptorservice",[]).factory("authInterceptor",e)}(),angular.module("app.services",["app.services.userservice","app.services.autheninterceptorservice","app.services.toastservice"]),function(){function e(e,t){return{showToast:function(t,o,r){var n=o,l=e.simple().textContent(t).action("CLOSE").highlightAction(!0).hideDelay(r).highlightClass("md-accent").position(n);e.show(l).then(function(t){"ok"==t&&e.hide()})}}}e.$inject=["$mdToast","$mdDialog"],angular.module("app.services.toastservice",[]).factory("toastService",e)}(),function(){function e(e,t,o,r){return{login:function(o){var n=t.defer();return e.post("/api/login",o).then(function(e){console.log(e),e.data.success&&(r.sessionStorage.token=e.data.token,r.sessionStorage.email=o.email),n.resolve(e.data)},function(e){n.reject(e)}),n.promise},register:function(o){var r=t.defer();return e.post("/api/register",o).then(function(e){console.log(e),r.resolve(e.data)},function(e){r.reject(e)}),r.promise},authentication:function(){var o=t.defer();return e.get("/api/authenticate").then(function(e){o.resolve(e.data)},function(e){o.reject(e)}),o.promise},logout:function(){var e=t.defer();return delete r.sessionStorage.token,delete r.sessionStorage.email,e.resolve({success:!0}),e.promise},getUserInfo:function(o){var r=t.defer();return e.get("/api/users/"+o).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise},isAuthenticate:function(){return!(!r.sessionStorage.token||!r.sessionStorage.email)},uploadImage:function(o){var r=t.defer();return e.put("/api/users/image",o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise}}}e.$inject=["$http","$q","$cookies","$window"],angular.module("app.services.userservice",[]).factory("userService",e)}();